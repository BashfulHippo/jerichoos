
ðŸš€ JerichoOS Boot Test (Bootloader 0.11)
========================================

Building kernel...

warning: `jericho_os` (bin "jericho_os") generated 40 warnings (run `cargo fix --bin "jericho_os" -p jericho_os` to apply 7 suggestions)
    Finished `release` profile [optimized] target(s) in 2.37s
âœ“ Kernel built

Creating bootable disk image...
âœ“ Bootable disk image created successfully!

Booting kernel (timeout: 3s)...
INFO : Framebuffer info: FrameBufferInfo { byte_len: 2764800, width: 1280, height: 720, pixel_format: Bgr, bytes_per_pixel: 3, stride: 1280 }
INFO : 4th Stage
INFO : BiosInfo { stage_4: Region { start: 130000, len: 24118 }, kernel: Region { start: 1000000, len: 12d8a0 }, ramdisk: Region { start: 112e000, len: 0 }, config_file: Region { start: 112e000, len: 0 }, last_used_addr: 112dfff, framebuffer: BiosFramebufferInfo { region: Region { start: fd000000, len: 2a3000 }, width: 500, height: 2d0, bytes_per_pixel: 3, stride: 500, pixel_format: Bgr }, memory_map_addr: de88, memory_map_len: 6 }
INFO : BIOS boot
INFO : Elf file loaded at Pointer {
    addr: 0x0000000001000000,
    metadata: 1235104,
}
INFO : virtual_address_offset: 0x8000000000
INFO : Handling Segment: Ph64(ProgramHeader64 { type_: Ok(Load), flags: Flags(4), offset: 0, virtual_addr: 0, physical_addr: 0, file_size: 1d1ec, mem_size: 1d1ec, align: 1000 })
INFO : Handling Segment: Ph64(ProgramHeader64 { type_: Ok(Load), flags: Flags(5), offset: 1d1f0, virtual_addr: 1e1f0, physical_addr: 1e1f0, file_size: 9f3cf, mem_size: 9f3cf, align: 1000 })
INFO : Handling Segment: Ph64(ProgramHeader64 { type_: Ok(Load), flags: Flags(6), offset: bc5c0, virtual_addr: be5c0, physical_addr: be5c0, file_size: 8148, mem_size: 8a40, align: 1000 })
INFO : Mapping bss section
INFO : Handling Segment: Ph64(ProgramHeader64 { type_: Ok(Load), flags: Flags(6), offset: c4708, virtual_addr: c7708, physical_addr: c7708, file_size: 88, mem_size: 61e8, align: 1000 })
INFO : Mapping bss section
INFO : Entry point at: 0x8000025db0
INFO : Creating GDT at PhysAddr(0x115c000)
INFO : Map framebuffer
INFO : Map physical memory
INFO : Allocate bootinfo
INFO : Create Memory Map
INFO : Create bootinfo
INFO : Jumping to kernel entry point at VirtAddr(0x8000025db0)
[INIT] Kernel entry point reached
[INFO] JerichoOS v0.1.0 - Capability Wasm Microkernel
[INIT] Initializing GDT...
[ OK ] GDT initialized
[INIT] Initializing IDT...
[INFO] IDT loaded, PICs initialized
[ OK ] IDT initialized
[TEST] Testing breakpoint exception...
[EXCEPTION] BREAKPOINT
InterruptStackFrame {
    instruction_pointer: VirtAddr(
        0x8000022378,
    ),
    code_segment: SegmentSelector {
        index: 1,
        rpl: Ring0,
    },
    cpu_flags: RFlags(
        ZERO_FLAG | PARITY_FLAG | 0x2,
    ),
    stack_pointer: VirtAddr(
        0x10000014620,
    ),
    stack_segment: SegmentSelector {
        index: 2,
        rpl: Ring0,
    },
}
[ OK ] Breakpoint exception handled successfully
[INIT] Initializing memory management...
[ OK ] Memory management initialized
[INIT] Initializing heap allocator...
[ OK ] Heap allocator initialized (512KB)
[TEST] Testing heap allocation...
[ OK ] Box allocation: value = 42
[ OK ] Vec allocation: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[INIT] Initializing capability system...
[ OK ] Capability system initialized
[INIT] Initializing IPC system...
[IPC] IPC system initialized
[ OK ] IPC system initialized
[TEST] Testing capability system...
[TEST] Creating memory capability with ALL rights...
[ OK ] Created capability ID: 1
[TEST] Deriving read-only capability...
[ OK ] Derived read-only capability ID: 2
[TEST] Attempting to escalate privileges (should fail)...
[ OK ] Privilege escalation blocked (security works!)
[TEST] Invoking read-only capability...
[SYSCALL] Invoked capability 2 for Memory resource 4096
[ OK ] Successfully invoked capability
[TEST] Revoking capability 2...
[ OK ] Capability revoked
[TEST] Attempting to use revoked capability (should fail)...
[ OK ] Revoked capability rejected (security works!)
[TEST] Capability system tests complete
[ OK ] All 1 capabilities properly managed
[INIT] Initializing WebAssembly runtime...
[WASM] Runtime initialized (wasmi interpreter)
[ OK ] WebAssembly runtime initialized
[TEST] Testing WebAssembly execution...
[TEST] Loading Wasm module (37 bytes)...
[ OK ] Wasm module loaded and validated
[TEST] Executing Wasm function 'test'...
[ OK ] Wasm function returned: 42 (expected 42)
[TEST] Testing Wasm host function calls...
[TEST] Loading Wasm module with host imports (62 bytes)...
[ OK ] Wasm module with imports loaded
[TEST] Calling Wasm function that invokes host print...
[WASM] Print called: 42
[ OK ] Host function call succeeded
[TEST] WebAssembly execution tests complete
[INFO] All systems operational
[INFO] Security: Capability-based access control
[INFO] Runtime: WebAssembly native execution
[INFO] Scheduler: Round-robin multitasking
[INFO] Platform: x86-64 bare metal
[INFO] JerichoOS booted successfully!
[PERF] Boot time: 17 ms (17321 Âµs, 51965388 cycles)
[INIT] Enabling timer interrupts (100 Hz)...
[TIMER] Configuring PIT to 100 Hz
[TIMER] PIT divisor: 11931
[TIMER] PIT configured, enabling interrupts
[TIMER] Tick 0 (0 s elapsed)
[TIMER] Interrupts enabled
[ OK ] Timer interrupts enabled
[INFO] System running, timer ticking every 10ms...
[INIT] Initializing task scheduler...
[SCHED] Scheduler initialized
[ OK ] Task scheduler initialized
[TEST] Testing multitasking with IPC...
[TEST] Creating IPC test tasks...
[SCHED] Added task 1 to scheduler
[SCHED] Added task 2 to scheduler
[SCHED] Added task 3 to scheduler
[ OK ] Created 3 tasks: 1, 2, 3
[TEST] Starting multitasking with IPC...
[SCHED] Scheduled task 1 (ipc_receiver)
[TEST] About to switch to first task...
[TEST] Jumping to task 1...
[IPC_RECEIVER] Starting, creating endpoint
[IPC] Created endpoint with capability 100
[IPC_RECEIVER] Endpoint created successfully
[IPC_RECEIVER] Waiting for messages...
[IPC_RECEIVER] Attempting to receive message 0...
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[TASK3] Iteration 0
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[IPC_RECEIVER] Attempting to receive message 0...
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[TASK3] Iteration 1
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[IPC_RECEIVER] Attempting to receive message 0...
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[TASK3] Iteration 2
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[IPC_RECEIVER] Attempting to receive message 0...
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[IPC_SENDER] Starting message transmission
[IPC_SENDER] Sending message 0
[IPC] Message queued to endpoint 100 (1 in queue)
[IPC_SENDER] Message 0 sent successfully
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[TASK3] Iteration 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[IPC_RECEIVER] Attempting to receive message 0...
[IPC_RECEIVER] Received message from task 2: [65, 48, 0]
[IPC_RECEIVER] Attempting to receive message 1...
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[IPC_SENDER] Sending message 1
[IPC] Message queued to endpoint 100 (1 in queue)
[IPC_SENDER] Message 1 sent successfully
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[TASK3] Iteration 4
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[IPC_RECEIVER] Attempting to receive message 1...
[IPC_RECEIVER] Received message from task 2: [66, 49, 0]
[IPC_RECEIVER] Attempting to receive message 2...
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[IPC_SENDER] Sending message 2
[IPC] Message queued to endpoint 100 (1 in queue)
[IPC_SENDER] Message 2 sent successfully
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[TASK3] Completed
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[IPC_RECEIVER] Attempting to receive message 2...
[IPC_RECEIVER] Received message from task 2: [67, 50, 0]
[IPC_RECEIVER] All messages received, going idle
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[IPC_SENDER] All messages sent, going idle
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1 (ipc_receiver)
[SCHED] Switching from task 3 to task 1
[SCHED] Scheduled task 2 (ipc_sender)
[SCHED] Switching from task 1 to task 2
[SCHED] Scheduled task 3 (task3)
[SCHED] Switching from task 2 to task 3
[SCHED] Scheduled task 1qemu-system-x86_64: terminating on signal 15 from pid 91233 (timeout)

========================================
Validating output...

âœ“ Kernel entry point message detected
âœ“ JerichoOS version message detected
âœ“ Boot success message detected
âœ“ No panic detected

========================================

âœ… BOOT TEST PASSED

JerichoOS Phase 0 Complete!
- Kernel compiles with Rust nightly
- Bootloader 0.11 successfully loads kernel
- Serial output working
- No panics or crashes
